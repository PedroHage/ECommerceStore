@model IEnumerable<ECommerceStore.Models.CartItem>
@{
	ViewData["Title"] = "Cart";
}

<h2>Cart</h2>
<hr />
<div class="container row gap-5">
	<div class="d-flex flex-column col-8 gap-2">
		@{
			double cartTotal = 0;
			foreach (var cartItem in Model)
			{
				cartTotal += cartItem.Product.Price * cartItem.Quantity;
				<div class="row border border-3">
					<img src="@Url.Action("GetImage", "Products", new { id = cartItem.ProductId })" alt="@cartItem.Product.Name" class="col-6"/>
					<div class="col-6 mt-3">
						<span>@(cartItem.Product.Name + " x" + cartItem.Quantity)</span>
						<span>@Html.DisplayFor(model =>  cartItem.Product.Price)</span>
						<p class="border">@cartItem.Product.Description</p>
						<a href="@Url.Action("RemoveCartItem", "Store", new { id = cartItem.Id })" class="btn btn-danger">Remove</a>
					</div>
				</div>

			}
		}
	</div>
	<div class="d-flex flex-column col">
		<h2>Total</h2>
		<span>@($"{cartTotal:C}")</span>
	</div>
</div>